<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система заявок - Школа №25</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container-fluid">
        <!-- Шапка -->
        <header class="row bg-primary text-white py-3 shadow">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-clipboard-list fa-2x me-3"></i>
                        <div>
                            <h1 class="h3 mb-0">Система заявок</h1>
                            <small class="opacity-75">Школа №25 - Заявки на учебные материалы</small>
                        </div>
                    </div>
                    <div id="user-info" class="d-none">
                        <div class="text-end">
                            <div class="fw-bold" id="user-name"></div>
                            <small class="opacity-75" id="user-role"></small>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Основной контент -->
        <main class="row py-4">
            <div class="col-12">
                <!-- Секция авторизации -->
                <div id="auth-section" class="row justify-content-center">
                    <div class="col-md-6 col-lg-5">
                        <div class="card shadow-lg border-0">
                            <div class="card-header bg-primary text-white text-center py-4">
                                <i class="fas fa-sign-in-alt fa-2x mb-3"></i>
                                <h3 class="card-title mb-0">Вход в систему</h3>
                                <p class="mb-0 mt-2 opacity-75">Используйте ваши школьные учетные данные</p>
                            </div>
                            <div class="card-body p-4">
                                <form id="authForm">
                                    <div class="mb-3">
                                        <label for="username" class="form-label fw-semibold">
                                            <i class="fas fa-user me-2 text-primary"></i>Логин
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light border-end-0">
                                                <i class="fas fa-at text-muted"></i>
                                            </span>
                                            <input type="text" class="form-control border-start-0" 
                                                   id="username" placeholder="Введите ваш логин" required>
                                        </div>
                                    </div>
                                    <div class="mb-4">
                                        <label for="password" class="form-label fw-semibold">
                                            <i class="fas fa-lock me-2 text-primary"></i>Пароль
                                        </label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light border-end-0">
                                                <i class="fas fa-key text-muted"></i>
                                            </span>
                                            <input type="password" class="form-control border-start-0" 
                                                   id="password" placeholder="Введите ваш пароль" required>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-lg w-100 py-3 fw-semibold">
                                        <i class="fas fa-sign-in-alt me-2"></i>Войти в систему
                                    </button>
                                </form>
                                
                                <div id="auth-error" class="alert alert-danger mt-3 d-none"></div>
                                
                                <!-- Информация о системе -->
                                <div class="mt-4 pt-4 border-top">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div class="text-primary">
                                                <i class="fas fa-rocket fa-xl mb-2"></i>
                                                <div class="small fw-semibold">Быстро</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-success">
                                                <i class="fas fa-shield-alt fa-xl mb-2"></i>
                                                <div class="small fw-semibold">Безопасно</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-info">
                                                <i class="fas fa-clock fa-xl mb-2"></i>
                                                <div class="small fw-semibold">24/7</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Дополнительная информация -->
                        <div class="text-center mt-4">
                            <p class="text-muted small">
                                <i class="fas fa-info-circle me-2"></i>
                                Для доступа к системе используйте логин и пароль от школьной учетной записи
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Основная секция после авторизации -->
                <div id="main-section" class="d-none">
                    <!-- Приветствие и навигация -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card bg-gradient-primary text-white border-0 shadow">
                                <div class="card-body py-4">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h4 class="mb-2">Добро пожаловать, <span id="main-user-name" class="fw-bold"></span>!</h4>
                                            <p class="mb-0 opacity-75" id="user-welcome-text">
                                                Управляйте заявками на учебные материалы и оборудование
                                            </p>
                                        </div>
                                        <div class="col-md-4 text-md-end">
                                            <div class="btn-group">
                                                <a href="/admin" id="admin-panel-btn" class="btn btn-warning d-none">
                                                    <i class="fas fa-crown me-2"></i>Панель администратора
                                                </a>
                                                <button id="logout-btn" class="btn btn-light">
                                                    <i class="fas fa-sign-out-alt me-2"></i>Выйти
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-4">
                        <!-- Левая колонка - Создание заявки -->
                        <div class="col-lg-5">
                            <div class="card shadow-sm border-0 h-100">
                                <div class="card-header bg-success text-white py-3">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-plus-circle fa-lg me-3"></i>
                                        <h5 class="mb-0">Новая заявка</h5>
                                    </div>
                                </div>
                                <div class="card-body p-4">
                                    <form id="appForm">
                                        <div class="mb-3">
                                            <label for="subject" class="form-label fw-semibold">
                                                <i class="fas fa-book me-2 text-success"></i>Название предмета
                                                <span class="text-danger">*</span>
                                            </label>
                                            <input type="text" class="form-control form-control-lg" 
                                                   id="subject" placeholder="Например: Ноутбук, Проектор, Учебники" 
                                                   required>
                                            <div class="form-text">Укажите точное название необходимого предмета или оборудования</div>
                                        </div>

                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="quantity" class="form-label fw-semibold">
                                                    <i class="fas fa-calculator me-2 text-success"></i>Количество
                                                    <span class="text-danger">*</span>
                                                </label>
                                                <input type="number" class="form-control" 
                                                       id="quantity" min="1" value="1" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="needDate" class="form-label fw-semibold">
                                                    <i class="fas fa-calendar-alt me-2 text-success"></i>Требуемая дата
                                                    <span class="text-danger">*</span>
                                                </label>
                                                <input type="date" class="form-control" id="needDate" required>
                                            </div>
                                        </div>

                                        <div class="mb-4 mt-3">
                                            <label for="link" class="form-label fw-semibold">
                                                <i class="fas fa-link me-2 text-success"></i>Ссылка на товар (необязательно)
                                            </label>
                                            <input type="url" class="form-control" 
                                                   id="link" placeholder="https://example.com/product">
                                            <div class="form-text">Можно указать ссылку на товар в интернет-магазине для примера</div>
                                        </div>

                                        <button type="submit" class="btn btn-success btn-lg w-100 py-3 fw-semibold">
                                            <i class="fas fa-paper-plane me-2"></i>Создать заявку
                                        </button>
                                    </form>

                                    <div id="app-success" class="alert alert-success mt-3 d-none"></div>
                                    <div id="app-error" class="alert alert-danger mt-3 d-none"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Правая колонка - Мои заявки -->
                        <div class="col-lg-7">
                            <div class="card shadow-sm border-0 h-100">
                                <div class="card-header bg-info text-white py-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-list fa-lg me-3"></i>
                                            <h5 class="mb-0">Мои заявки</h5>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-outline-light btn-sm" id="refresh-apps" 
                                                    title="Обновить список">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body p-4">
                                    <!-- Фильтры -->
                                    <div class="row g-3 mb-4">
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold text-muted">Фильтр по статусу:</label>
                                            <select class="form-select" id="status-filter">
                                                <option value="all">Все статусы</option>
                                                <option value="active">Активные</option>
                                                <option value="completed">Выполненные</option>
                                                <option value="cancelled">Отмененные</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold text-muted">Фильтр по приоритету:</label>
                                            <select class="form-select" id="priority-filter">
                                                <option value="all">Все приоритеты</option>
                                                <option value="urgent">Срочные</option>
                                                <option value="high">Высокие</option>
                                                <option value="normal">Обычные</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Статистика -->
                                    <div class="row g-3 mb-4" id="stats-section" style="display: none;">
                                        <div class="col-4">
                                            <div class="text-center p-3 border rounded bg-light">
                                                <div class="h4 mb-1 text-primary fw-bold" id="stat-active">0</div>
                                                <small class="text-muted fw-semibold">Активные</small>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-center p-3 border rounded bg-light">
                                                <div class="h4 mb-1 text-success fw-bold" id="stat-completed">0</div>
                                                <small class="text-muted fw-semibold">Выполненные</small>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-center p-3 border rounded bg-light">
                                                <div class="h4 mb-1 text-secondary fw-bold" id="stat-total">0</div>
                                                <small class="text-muted fw-semibold">Всего</small>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Список заявок -->
                                    <div id="applications-list" class="applications-container">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-clipboard-list fa-3x mb-3 opacity-50"></i>
                                            <h5 class="fw-semibold">Заявок пока нет</h5>
                                            <p class="small text-muted">Создайте первую заявку, используя форму слева</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Быстрые действия -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card border-0 shadow-sm">
                                <div class="card-body py-3">
                                    <div class="row text-center">
                                        <div class="col-md-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <i class="fas fa-question-circle text-primary me-2"></i>
                                                <small class="text-muted">Нужна помощь?</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <i class="fas fa-clock text-warning me-2"></i>
                                                <small class="text-muted">Заявки обрабатываются в течение 48 часов</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <i class="fas fa-phone text-success me-2"></i>
                                                <small class="text-muted">Техподдержка: @kalugin66</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <i class="fas fa-envelope text-info me-2"></i>
                                                <small class="text-muted">kalugin66@ya.ru</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Подвал -->
        <footer class="row bg-dark text-white py-4 mt-5">
            <div class="col-12">
                <div class="text-center">
                    <div class="mb-2">
                        <i class="fas fa-school me-2 text-primary"></i>
                        <span class="fw-semibold">Муниципальное бюджетное общеобразовательное учреждение "Школа №25"</span>
                    </div>
                    <p class="mb-0 small opacity-75">
                        Система электронных заявок на учебные материалы 
                        <span class="mx-2">•</span> 
                        2025 год
                        <span class="mx-2">•</span> 
                        Все права защищены
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/script.js"></script>
</body>
</html>